/* Copyright 2011 Google Inc. All Rights Reserved. */ (function(){var d,e,f,g,h,k,l,m,n,q,r,s,t,u,v,w,x,z=function(){var a={};a.language=f.options[f.selectedIndex].value;a.popupDblclick=g.checked?"true":"false";a.popupSelect=l.checked?"true":"false";a.popupDblclickKey=k.options[k.selectedIndex].value;a.popupSelectKey=n.options[n.selectedIndex].value;a.storeHistory=q.checked?"true":"false";a.allowCrossExtensionHistory=t.checked?"true":"false";a.enableHttps="true";window.localStorage.options=JSON.stringify(a);var b=document.getElementById("save-status");b.style.setProperty("-webkit-transition",
"opacity 0s ease-out");b.style.opacity=1;window.setTimeout(function(){b.style.setProperty("-webkit-transition","opacity 0.4s ease-out");b.style.opacity=0},1500);y(!1);chrome.extension.getBackgroundPage()["gdx.updateOptions"]()},F=function(){y(!1);var a=JSON.parse(window.localStorage.options);A(f,a.language);g.checked="true"===a.popupDblclick;B();l.checked="true"===a.popupSelect;C();A(k,a.popupDblclickKey);A(n,a.popupSelectKey);q.checked="true"===a.storeHistory;t.checked="true"===a.allowCrossExtensionHistory;
D();chrome.storage.local.get("word-history",function(a){r=a=Object.keys(a["word-history"]).length;s.innerHTML=a;E()})},E=function(){0<r&&q.checked?(v.disabled=!1,x.disabled=!1):0===r&&(v.disabled=!0,x.disabled=!0)},G=function(a){var b="";a=a["word-history"];for(var c in a)var p=c.split("<"),H=a[c],b=b+p[0],b=b+"\t",b=b+p[1],b=b+"\t",b=b+p[2],b=b+"\t",b=b+H,b=b+"\n";w.href=window.URL.createObjectURL(new Blob([b],{type:"text/plain"}));b=w;c=document.createEvent("MouseEvents");c.initEvent("click",!0,
!0);b.dispatchEvent(c)},I=function(){chrome.storage.local.get("word-history",G)},J=function(){chrome.storage.local.set({"word-history":{}});r=0;s.innerHTML=0;E()},A=function(a,b){for(var c=0,p=a.options.length;c<p;c++)if(a.options[c].value===b){a.options[c].selected=!0;break}},y=function(a){d.disabled=!a;e.disabled=!a},K=function(){y(!0)},B=function(){var a=g.checked;k.disabled=!a;h.className=a?"":"text-disabled"},C=function(){var a=l.checked;n.disabled=!a;m.className=a?"":"text-disabled"},D=function(){var a=
q.checked;t.disabled=!a;u.className=a?"":"text-disabled";a||(t.checked=!1);v.disabled=!a;x.disabled=!a;E()};
(function(){d=document.getElementById("save-btn");e=document.getElementById("reset-btn");f=document.getElementById("language-selector");g=document.getElementById("popup-dblclick-checkbox");h=document.getElementById("popup-dblclick-text");k=document.getElementById("popup-dblclick-key");l=document.getElementById("popup-select-checkbox");m=document.getElementById("popup-select-text");n=document.getElementById("popup-select-key");q=document.getElementById("store-history-checkbox");s=document.getElementById("num-words-in-history");
t=document.getElementById("allow-cross-extension-history-checkbox");u=document.getElementById("allow-cross-extension-history-text");v=document.getElementById("download-history-btn");w=document.getElementById("download-history-link");x=document.getElementById("clear-history-btn");r=0;d.addEventListener("click",z,!1);e.addEventListener("click",F,!1);g.addEventListener("change",function(){B()},!1);l.addEventListener("change",function(){C()},!1);q.addEventListener("change",function(){D()},!1);v.addEventListener("click",
I,!1);x.addEventListener("click",J,!1);document.getElementById("year").innerText=(new Date).getFullYear();for(var a=document.getElementsByTagName("input"),b=0,c;c=a[b];b++)c.addEventListener("change",K,!1);a=document.getElementsByTagName("select");for(b=0;c=a[b];b++)c.addEventListener("change",K,!1);-1!==window.navigator.platform.toLowerCase().indexOf("mac")&&(document.getElementById("popup-dblclick-key-ctrl").innerHTML="Command",document.getElementById("popup-select-key-ctrl").innerHTML="Command");
F()})();})();
